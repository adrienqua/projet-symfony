{% extends 'base.html.twig' %}

{% block title %}Liste des utilisateurs{% endblock %}

{% block content %}
    <section class="container mx-auto py-12">
        <h1 class="text-3xl font-bold text-center mb-8">Liste des utilisateurs</h1>
        <div class="bg-white shadow-md rounded-lg overflow-hidden dark:bg-gray-700">
            <table class="table-auto w-full text-left border-collapse">
                <thead class="bg-gray-200 dark:bg-gray-800">
                    <tr>
                        <th class="p-4">ID</th>
                        <th class="p-4">Nom d'utilisateur</th>
                        <th class="p-4">Nom</th>
                        <th class="p-4">Prénom</th>
                        <th class="p-4">Date de naissance</th>
                        <th class="p-4">Genre</th>
                        <th class="p-4">Email</th>
                        <th class="p-4">Rôles</th>
                        <th class="p-4">Contenu adulte</th>
                        <th class="p-4">Vérifié</th>
                        <th class="p-4 text-center">Actions</th>
                    </tr>
                </thead>
                <tbody>
                {% for user in users %}
                    <tr class="border-b dark:border-gray-600">
                        <td class="p-4">{{ user.id }}</td>
                        <td class="p-4">{{ user.username }}</td>
                        <td class="p-4">{{ user.lastName }}</td>
                        <td class="p-4">{{ user.firstName }}</td>
                        <td class="p-4">{{ user.birthDate ? user.birthDate|date('Y-m-d') : 'Non spécifiée' }}</td>
                        <td class="p-4">{{ user.gender }}</td>
                        <td class="p-4">{{ user.email }}</td>
                        <td class="p-4">{{ user.roles ? user.roles|json_encode : 'Aucun rôle' }}</td>
                        <td class="p-4">{{ user.offersAdultContent ? 'Oui' : 'Non' }}</td>
                        <td class="p-4">{{ user.isVerified ? 'Oui' : 'Non' }}</td>
                        <td class="p-4 flex justify-center gap-2">
                            <a href="{{ path('app_user_show', {'id': user.id}) }}" class="text-blue-500 hover:underline">Voir</a>
                            <a href="{{ path('app_user_edit', {'id': user.id}) }}" class="text-yellow-500 hover:underline">Modifier</a>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="11" class="p-4 text-center text-gray-500 dark:text-gray-400">Aucun utilisateur trouvé</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="mt-8 text-center">
            <a href="{{ path('app_user_new') }}" class="bg-fuchsia-500 text-white py-2 px-4 rounded-lg shadow hover:bg-fuchsia-600">Créer un nouvel utilisateur</a>
        </div>
    </section>
{% endblock %}
